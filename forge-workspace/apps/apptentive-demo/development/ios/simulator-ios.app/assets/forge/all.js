/*! Copyright 2011 Trigger Corp. All rights reserved. */
(function(){var n={};var o={};n.config=window.forge.config;o.listeners={};o.eventQueue={};o.queueEvents=true;var s={};var j=[];var h=null;var a=false;var v=function(){if(j.length>0){if(!o.debug||window.catalystConnected){a=true;while(j.length>0){var w=j.shift();if(w[0]=="logging.log"){console.log(w[1].message)}o.priv.call.apply(o.priv,w)}a=false}else{h=setTimeout(v,500)}}};o.priv={call:function(D,C,B,x){if((!o.debug||window.catalystConnected||D==="internal.showDebugWarning")&&(j.length===0||a)){var w=n.tools.UUID();var z=true;if(D==="button.onClicked.addListener"||D==="message.toFocussed"){z=false}if(B||x){s[w]={success:B,error:x,onetime:z}}var y={callid:w,method:D,params:C};o.priv.send(y);if(window._forgeDebug){try{y.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiRequest(y)}catch(A){}}}else{j.push(arguments);if(!h){h=setTimeout(v,500)}}},send:function(){throw new Error("Forge error: missing bridge to privileged code")},lastResult:undefined,receive:function(w,x){if(x!==undefined&&x===o.priv.lastResult){return"success"}o.priv.lastResult=x;if(w.callid){if(typeof s[w.callid]===undefined){n.log("Nothing stored for call ID: "+w.callid)}var y=s[w.callid];if(y&&y[w.status]){y[w.status](w.content)}if(y&&y.onetime){delete s[w.callid]}if(window._forgeDebug){try{w.end=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiResponse(w)}catch(z){}}}else{if(w.event){if(o.listeners[w.event]){o.listeners[w.event].forEach(function(A){if(w.params){A(w.params)}else{A()}})}else{if(o.queueEvents){if(o.eventQueue[w.event]){o.eventQueue[w.event].push(w.params)}else{o.eventQueue[w.event]=[w.params]}}}if(o.listeners["*"]){o.listeners["*"].forEach(function(A){if(w.params){A(w.event,w.params)}else{A(w.event)}})}if(window._forgeDebug){try{w.start=(new Date().getTime())/1000;window._forgeDebug.forge.APICall.apiEvent(w)}catch(z){}}}}return"success"}};setTimeout(function(){o.queueEvents=false;o.eventQueue={}},30000);o.addEventListener=function(w,x){if(o.listeners[w]){o.listeners[w].push(x)}else{o.listeners[w]=[x]}if(o.eventQueue[w]){o.eventQueue[w].forEach(function(y){x(y)});delete o.eventQueue[w]}};o.generateQueryString=function(x){if(!x){return""}if(!(x instanceof Object)){return new String(x).toString()}var y=[];var w=function(D,C){if(D===null){return}else{if(D instanceof Array){var A=0;for(var z in D){var B=(C?C:"")+"["+A+"]";A+=1;if(!D.hasOwnProperty(z)){continue}w(D[z],B)}}else{if(D instanceof Object){for(var z in D){if(!D.hasOwnProperty(z)){continue}var B=z;if(C){B=C+"["+z+"]"}w(D[z],B)}}else{y.push(encodeURIComponent(C)+"="+encodeURIComponent(D))}}}};w(x);return y.join("&").replace("%20","+")};o.generateMultipartString=function(x,z){if(typeof x==="string"){return""}var y="";for(var w in x){if(!x.hasOwnProperty(w)){continue}if(x[w]===null){continue}y+="--"+z+"\r\n";y+='Content-Disposition: form-data; name="'+w.replace('"','\\"')+'"\r\n\r\n';y+=x[w].toString()+"\r\n"}return y};o.generateURI=function(x,w){var y="";if(x.indexOf("?")!==-1){y+=x.split("?")[1]+"&";x=x.split("?")[0]}y+=this.generateQueryString(w)+"&";y=y.substring(0,y.length-1);return x+(y?"?"+y:"")};o.disabledModule=function(w,x){var y="The '"+x+"' module is disabled for this app, enable it in your app config and rebuild in order to use this function";n.logging.error(y);w&&w({message:y,type:"UNAVAILABLE",subtype:"DISABLED_MODULE"})};n.enableDebug=function(){o.debug=true;o.priv.call("internal.showDebugWarning",{},null,null);o.priv.call("internal.hideDebugWarning",{},null,null)};setTimeout(function(){if(window.forge&&window.forge.debug){alert("Warning!\n\n'forge.debug = true;' is no longer supported\n\nUse 'forge.enableDebug();' instead.")}},3000);n.is={mobile:function(){return false},desktop:function(){return false},android:function(){return false},ios:function(){return false},chrome:function(){return false},firefox:function(){return false},safari:function(){return false},ie:function(){return false},web:function(){return false},orientation:{portrait:function(){return false},landscape:function(){return false}},connection:{connected:function(){return true},wifi:function(){return true}}};n.is["mobile"]=function(){return true};n.is["ios"]=function(){return true};n.is["orientation"]["portrait"]=function(){return o.currentOrientation=="portrait"};n.is["orientation"]["landscape"]=function(){return o.currentOrientation=="landscape"};n.is["connection"]["connected"]=function(){return o.currentConnectionState.connected};n.is["connection"]["wifi"]=function(){return o.currentConnectionState.wifi};var k=function(C,A,D){var y=[];stylize=function(F,E){return F};function w(E){return E instanceof RegExp||(typeof E==="object"&&Object.prototype.toString.call(E)==="[object RegExp]")}function x(E){return E instanceof Array||Array.isArray(E)||(E&&E!==Object.prototype&&x(E.__proto__))}function z(G){if(G instanceof Date){return true}if(typeof G!=="object"){return false}var E=Date.prototype&&Object.getOwnPropertyNames(Date.prototype);var F=G.__proto__&&Object.getOwnPropertyNames(G.__proto__);return JSON.stringify(F)===JSON.stringify(E)}function B(Q,N){try{if(Q&&typeof Q.inspect==="function"&&!(Q.constructor&&Q.constructor.prototype===Q)){return Q.inspect(N)}switch(typeof Q){case"undefined":return stylize("undefined","undefined");case"string":var E="'"+JSON.stringify(Q).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return stylize(E,"string");case"number":return stylize(""+Q,"number");case"boolean":return stylize(""+Q,"boolean")}if(Q===null){return stylize("null","null")}if(Q instanceof Document){return(new XMLSerializer()).serializeToString(Q)}var K=Object.keys(Q);var R=A?Object.getOwnPropertyNames(Q):K;if(typeof Q==="function"&&R.length===0){var F=Q.name?": "+Q.name:"";return stylize("[Function"+F+"]","special")}if(w(Q)&&R.length===0){return stylize(""+Q,"regexp")}if(z(Q)&&R.length===0){return stylize(Q.toUTCString(),"date")}var G,O,L;if(x(Q)){O="Array";L=["[","]"]}else{O="Object";L=["{","}"]}if(typeof Q==="function"){var J=Q.name?": "+Q.name:"";G=" [Function"+J+"]"}else{G=""}if(w(Q)){G=" "+Q}if(z(Q)){G=" "+Q.toUTCString()}if(R.length===0){return L[0]+G+L[1]}if(N<0){if(w(Q)){return stylize(""+Q,"regexp")}else{return stylize("[Object]","special")}}y.push(Q);var I=R.map(function(T){var S,U;if(Q.__lookupGetter__){if(Q.__lookupGetter__(T)){if(Q.__lookupSetter__(T)){U=stylize("[Getter/Setter]","special")}else{U=stylize("[Getter]","special")}}else{if(Q.__lookupSetter__(T)){U=stylize("[Setter]","special")}}}if(K.indexOf(T)<0){S="["+T+"]"}if(!U){if(y.indexOf(Q[T])<0){if(N===null){U=B(Q[T])}else{U=B(Q[T],N-1)}if(U.indexOf("\n")>-1){if(x(Q)){U=U.split("\n").map(function(V){return"  "+V}).join("\n").substr(2)}else{U="\n"+U.split("\n").map(function(V){return"   "+V}).join("\n")}}}else{U=stylize("[Circular]","special")}}if(typeof S==="undefined"){if(O==="Array"&&T.match(/^\d+$/)){return U}S=JSON.stringify(""+T);if(S.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){S=S.substr(1,S.length-2);S=stylize(S,"name")}else{S=S.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");S=stylize(S,"string")}}return S+": "+U});y.pop();var P=0;var H=I.reduce(function(S,T){P++;if(T.indexOf("\n")>=0){P++}return S+T.length+1},0);if(H>50){I=L[0]+(G===""?"":G+"\n ")+" "+I.join(",\n  ")+" "+L[1]}else{I=L[0]+G+" "+I.join(", ")+" "+L[1]}return I}catch(M){return"[No string representation]"}}return B(C,(typeof D==="undefined"?2:D))};var b=function(x,y){if("logging" in n.config){var w=n.config.logging.marker||"FORGE"}else{var w="FORGE"}x="["+w+"] "+(x.indexOf("\n")===-1?"":"\n")+x;o.priv.call("logging.log",{message:x,level:y});if(typeof console!=="undefined"){switch(y){case 10:if(console.debug!==undefined&&!(console.debug.toString&&console.debug.toString().match("alert"))){console.debug(x)}break;case 30:if(console.warn!==undefined&&!(console.warn.toString&&console.warn.toString().match("alert"))){console.warn(x)}break;case 40:case 50:if(console.error!==undefined&&!(console.error.toString&&console.error.toString().match("alert"))){console.error(x)}break;default:case 20:if(console.info!==undefined&&!(console.info.toString&&console.info.toString().match("alert"))){console.info(x)}break}}};var m=function(w,x){if(w in n.logging.LEVELS){return n.logging.LEVELS[w]}else{n.logging.__logMessage("Unknown configured logging level: "+w);return x}};var t=function(x){var A=function(B){if(B.message){return B.message}else{if(B.description){return B.description}else{return""+B}}};if(x){var z="\nError: "+A(x);try{if(x.lineNumber){z+=" on line number "+x.lineNumber}if(x.fileName){var w=x.fileName;z+=" in file "+w.substr(w.lastIndexOf("/")+1)}}catch(y){}if(x.stack){z+="\r\nStack trace:\r\n"+x.stack}return z}return""};n.logging={LEVELS:{ALL:0,DEBUG:10,INFO:20,WARNING:30,ERROR:40,CRITICAL:50},debug:function(x,w){n.logging.log(x,w,n.logging.LEVELS.DEBUG)},info:function(x,w){n.logging.log(x,w,n.logging.LEVELS.INFO)},warning:function(x,w){n.logging.log(x,w,n.logging.LEVELS.WARNING)},error:function(x,w){n.logging.log(x,w,n.logging.LEVELS.ERROR)},critical:function(x,w){n.logging.log(x,w,n.logging.LEVELS.CRITICAL)},log:function(x,w,A){if(typeof(A)==="undefined"){var A=n.logging.LEVELS.INFO}try{var y=m(n.config.core.general.logging.level,n.logging.LEVELS.ALL)}catch(z){var y=n.logging.LEVELS.ALL}if(A>=y){b(k(x,false,10)+t(w),A)}}};n.internal={ping:function(x,y,w){o.priv.call("internal.ping",{data:[x]},y,w)},call:o.priv.call,addEventListener:o.addEventListener,listeners:o.listeners,configForModule:function(w){return n.config.modules[n.module_mapping[w]].config}};var u={};o.currentOrientation=u;o.currentConnectionState=u;o.addEventListener("internal.orientationChange",function(w){if(o.currentOrientation!=w.orientation){o.currentOrientation=w.orientation;o.priv.receive({event:"event.orientationChange"})}});o.addEventListener("internal.connectionStateChange",function(w){if(w.connected!=o.currentConnectionState.connected||w.wifi!=o.currentConnectionState.wifi){o.currentConnectionState=w;o.priv.receive({event:"event.connectionStateChange"})}});n.event={menuPressed:{addListener:function(x,w){o.addEventListener("event.menuPressed",x)}},backPressed:{addListener:function(x,w){o.addEventListener("event.backPressed",function(){x(function(){o.priv.call("event.backPressed_closeApplication",{})})})},preventDefault:function(x,w){o.priv.call("event.backPressed_preventDefault",{},x,w)},restoreDefault:function(x,w){o.priv.call("event.backPressed_restoreDefault",{},x,w)}},messagePushed:{addListener:function(x,w){o.addEventListener("event.messagePushed",x)}},orientationChange:{addListener:function(x,w){o.addEventListener("event.orientationChange",x);if(typeof u!=="undefined"&&o.currentOrientation!==u){o.priv.receive({event:"event.orientationChange"})}}},connectionStateChange:{addListener:function(x,w){o.addEventListener("event.connectionStateChange",x)}},appPaused:{addListener:function(x,w){o.addEventListener("event.appPaused",x)}},appResumed:{addListener:function(x,w){o.addEventListener("event.appResumed",x)}},statusBarTapped:{addListener:function(x,w){o.addEventListener("event.statusBarTapped",x)}}};n.reload={updateAvailable:function(x,w){o.priv.call("reload.updateAvailable",{},x,w)},update:function(x,w){o.priv.call("reload.update",{},x,w)},pauseUpdate:function(x,w){o.priv.call("reload.pauseUpdate",{},x,w)},applyNow:function(x,w){n.logging.error("reload.applyNow has been disabled, please see docs.trigger.io for more information.");w({message:"reload.applyNow has been disabled, please see docs.trigger.io for more information.",type:"UNAVAILABLE"})},applyAndRestartApp:function(x,w){o.priv.call("reload.applyAndRestartApp",{},x,w)},switchStream:function(x,y,w){o.priv.call("reload.switchStream",{streamid:x},y,w)},updateReady:{addListener:function(x,w){o.addEventListener("reload.updateReady",x)}},updateProgress:{addListener:function(x,w){o.addEventListener("reload.updateProgress",x)}}};n.live={restartApp:function(x,w){o.priv.call("live.restartApp",{},x,w)}};var r=true;var p=function(){document.removeEventListener("DOMContentLoaded",p,false);if(typeof window.LiveReload!=="undefined"&&n.is.mobile()){var w=(function(){function x(z,y){this.window=z;this.host=y}x.prototype.reload=function(z,y){if(z.match(/\.css$/i)){return false}else{if(z.match(/\.(jpe?g|png|gif)$/i)){return false}}if(r){r=false;n.live.restartApp()}return true};x.identifier="forgelive";x.version="1.0";return x})();window.LiveReload.addPlugin(w)}};document.addEventListener("DOMContentLoaded",p,false);n.tools={UUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){var x=Math.random()*16|0;var w=y=="x"?x:(x&3|8);return w.toString(16)}).toUpperCase()},getURL:function(x,y,w){o.priv.call("tools.getURL",{name:x.toString()},y,w)}};var q=[];var g=false;o.priv.get=function(){var w=JSON.stringify(q);q=[];return w};var f=[],l="zero-timeout-message";function d(w){f.push(w);window.postMessage(l,"*")}function c(w){setTimeout(w,0)}function e(w){if(w.source==window&&w.data==l){if(w.stopPropagation){w.stopPropagation()}if(f.length){f.shift()()}}}if(window.postMessage){if(window.addEventListener){window.addEventListener("message",e,true)}else{if(window.attachEvent){window.attachEvent("onmessage",e)}}window.setZeroTimeout=d}else{window.setZeroTimeout=c}var i=function(){if(g&&!window.forge._flushing){window.forge._flushing=true;window.forge._flushingInterval=setInterval(function(){window.location.href="forge://go"},100);c(function(){window.location.href="forge://go"})}};o.priv.send=function(w){if(window.webkit&&g){window.webkit.messageHandlers.forge.postMessage(w)}else{q.push(w);i()}};document.addEventListener("DOMContentLoaded",function(){g=true;n.internal.call("internal.ping",{data:"hello"})},false);n._get=o.priv.get;n._receive=function(){var w=arguments;c(function(){o.priv.receive.apply(this,w)});return"success"};window.forge=n})();(function(){forge.media={videoPlay:function(b,c,a){if(!b.uri){b={uri:b}}forge.internal.call("media.videoPlay",b,c,a)},createAudioPlayer:function(b,c,a){forge.internal.call("media.createAudioPlayer",{file:b},function(d){c({play:function(f,e){forge.internal.call("media.audioPlayerPlay",{player:d},f,e)},pause:function(f,e){forge.internal.call("media.audioPlayerPause",{player:d},f,e)},stop:function(f,e){forge.internal.call("media.audioPlayerStop",{player:d},f,e)},destroy:function(f,e){forge.internal.call("media.audioPlayerDestroy",{player:d},f,e)},seek:function(f,g,e){forge.internal.call("media.audioPlayerSeek",{player:d,seekTo:f},g,e)},duration:function(f,e){forge.internal.call("media.audioPlayerDuration",{player:d},f,e)},positionChanged:{addListener:function(f,e){forge.internal.addEventListener("media.audioPlayer."+d+".time",f)}}})},a)}}})();(function(){forge.notification={create:function(d,c,b,a){forge.internal.call("notification.create",{title:d,text:c},b,a)},setBadgeNumber:function(b,c,a){forge.internal.call("notification.setBadgeNumber",{number:b},c,a)},getBadgeNumber:function(b,a){forge.internal.call("notification.getBadgeNumber",{},b,a)},alert:function(d,a,c,b){forge.internal.call("notification.alert",{title:d,body:a},c,b)},confirm:function(f,a,b,d,e,c){forge.internal.call("notification.confirm",{title:f,body:a,positive:b,negative:d},e,c)},toast:function(a,c,b){forge.internal.call("notification.toast",{body:a},c,b)},showLoading:function(d,a,c,b){forge.internal.call("notification.showLoading",{title:d,body:a},c,b)},hideLoading:function(b,a){forge.internal.call("notification.hideLoading",{},b,a)}}})();(function(){forge.prefs={get:function(b,c,a){forge.internal.call("prefs.get",{key:b.toString()},c&&function(d){if(d==="undefined"){d=undefined}else{try{d=JSON.parse(d)}catch(f){a({message:f.toString()});return}}c(d)},a)},set:function(b,c,d,a){if(c===undefined){c="undefined"}else{c=JSON.stringify(c)}forge.internal.call("prefs.set",{key:b.toString(),value:c},d,a)},keys:function(b,a){forge.internal.call("prefs.keys",{},b,a)},all:function(b,a){var b=b&&function(c){for(key in c){if(c[key]==="undefined"){c[key]=undefined}else{c[key]=JSON.parse(c[key])}}b(c)};forge.internal.call("prefs.all",{},b,a)},clear:function(b,c,a){forge.internal.call("prefs.clear",{key:b.toString()},c,a)},clearAll:function(b,a){forge.internal.call("prefs.clearAll",{},b,a)}}})();(function(){forge.apptentive={setInitialUserName:function(c,a,b){forge.internal.call("apptentive.setInitialUserName",{initialUserName:b},c,a)},setInitialUserEmailAddress:function(b,a,c){forge.internal.call("apptentive.setInitialUserEmailAddress",{initialUserEmailAddress:c},b,a)},addCustomDeviceData:function(d,a,b,c){forge.internal.call("apptentive.addCustomDeviceData",{key:b,value:c},d,a)},removeCustomDeviceData:function(c,a,b){forge.internal.call("apptentive.removeCustomDeviceData",{key:b},c,a)},addCustomPersonData:function(d,a,b,c){forge.internal.call("apptentive.addCustomPersonData",{key:b,value:c},d,a)},removeCustomPersonData:function(c,a,b){forge.internal.call("apptentive.removeCustomPersonData",{key:b},c,a)},showMessageCenter:function(b,a){forge.internal.call("apptentive.showMessageCenter",{},b,a)},showMessageCenterWithCustomData:function(b,a,c){forge.internal.call("apptentive.showMessageCenterWithCustomData",{customData:c},b,a)},getUnreadMessageCount:function(b,a){forge.internal.call("apptentive.getUnreadMessageCount",{},b,a)},engage:function(c,a,b){forge.logging.warning("About to call engage()");forge.internal.call("apptentive.engage",{event:b},c,a);forge.logging.warning("engage() returned",a)},log:function(b,a){forge.logging.warning("log()")},addUnreadMessageCountChangedListener:function(a){forge.logging.info("Added unreadMessageCountChanged Listener.");forge.internal.addEventListener("apptentive.unreadMessageCountChanged",a)},addSurveyFinishedListener:function(a){forge.logging.info("Added surveyFinished Listener.");forge.internal.addEventListener("apptentive.surveyFinished",a)},}})();(function(){forge.contact={select:function(b,a){forge.internal.call("contact.select",{},b,a)},selectById:function(c,b,a){forge.internal.call("contact.selectById",{id:c},b,a)},selectAll:function(a,c,b){if(typeof a==="function"){b=c;c=a;a=[]}forge.internal.call("contact.selectAll",{fields:a},c,b)},add:function(a,c,b){if(typeof a==="function"){b=c;c=a;a={}}forge.internal.call("contact.add",{contact:a},c,b)},insert:function(a,c,b){forge.internal.call("contact.insert",{contact:a},c,b)}}})();(function(){forge.request={get:function(e,f,d){forge.request.ajax({url:e,dataType:"text",success:f&&function(){try{arguments[0]=JSON.parse(arguments[0])}catch(g){}f.apply(this,arguments)},error:d})}};var b=function(e){if(!e){return""}if(!(e instanceof Object)){return new String(e).toString()}var f=[];var d=function(m,l){if(m===null){return}else{if(m instanceof Array){var i=0;for(var g in m){var j=(l?l:"")+"["+i+"]";i+=1;if(!m.hasOwnProperty(g)){continue}d(m[g],j)}}else{if(m instanceof Object){for(var h in m){if(!m.hasOwnProperty(h)){continue}var k=h;if(l){k=l+"["+h+"]"}d(m[h],k)}}else{f.push(encodeURIComponent(l)+"="+encodeURIComponent(m))}}}};d(e);return f.join("&").replace("%20","+")};var a=function(e,d){var f="";if(e.indexOf("?")!==-1){f+=e.split("?")[1]+"&";e=e.split("?")[0]}f+=b(d)+"&";f=f.substring(0,f.length-1);return e+(f?"?"+f:"")};var c=function(h,k){if(typeof h==="string"){return""}var j="";for(var e in h){if(!h.hasOwnProperty(e)){continue}if(h[e]===null){continue}var g=h[e];if(Object.prototype.toString.call(g)==="[object Array]"){for(var d=0;d<g.length;d++){var f={};f[e+"["+d+"]"]=g[d];j+=c(f,k)}}else{j+="--"+k+"\r\n";j+='Content-Disposition: form-data; name="'+e.replace('"','\\"')+'"\r\n\r\n';j+=h[e].toString()+"\r\n"}}return j};forge.request["ajax"]=function(h,n,u){var l=(h.files?h.files:null);var v=(h.fileUploadMethod?h.fileUploadMethod:"multipart");var k=(h.url?h.url:null);n=n?n:(h.success?h.success:undefined);u=u?u:(h.error?h.error:undefined);var j=(h.username?h.username:null);var d=(h.password?h.password:null);var z=(h.accepts?h.accepts:["*/*"]);var r=(h.cache?h.cache:false);var x=(h.contentType?h.contentType:null);var A=(h.data?h.data:null);var t=(h.dataType?h.dataType:null);var f=(h.headers?h.headers:{});var o=(h.timeout?h.timeout:60000);var i=(h.type?h.type:null);if(!i&&l){i="POST"}else{if(!i){i="GET"}}var m=h.progress?h.progress:null;if(typeof z==="string"){z=[z]}var w=null;if(l){if(v=="multipart"){w=forge.tools.UUID().replace(/-/g,"");A=c(A,w);x="multipart/form-data; boundary="+w}else{if(v=="raw"){if(l.length>1){forge.logging.warning("Only one file can be uploaded at once with type 'raw'");l=[l[0]]}A=null;if(!x){x="image/jpg"}}}}else{if(i=="GET"){k=a(k,A);A=null}else{if(A){A=b(A);if(!x){x="application/x-www-form-urlencoded"}}}}if(r){r={};r["wm"+Math.random()]=Math.random();k=a(k,r)}if(z){f.Accept=z.join(",")}if(x){f["Content-Type"]=x}var s={};if(window._forgeDebug){try{s.id=forge.tools.UUID();s.fromUrl=window.location.href;s.reqTime=(new Date()).getTime()/1000;s.method=i;s.data=A;s.url=k;_forgeDebug.wi.NetworkNotify.identifierForInitialRequest(s.id,s.url,{url:s.fromUrl,frameId:0,loaderId:0},[]);_forgeDebug.wi.NetworkNotify.willSendRequest(s.id,s.reqTime,{url:s.url,httpMethod:s.method,httpHeaderFields:{},requestFormData:s.data},{isNull:true})}catch(y){}}var q=false;var p=setTimeout(function(){if(q){return}q=true;if(window._forgeDebug){try{s.respTime=(new Date()).getTime()/1000;s.respText=A;_forgeDebug.wi.NetworkNotify.didReceiveResponse(s.id,s.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(s.id,s.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(s.id,s.respTime)}catch(B){}}u&&u({message:"Request timed out",type:"EXPECTED_FAILURE"})},o);var g=null;if(m!==null){g=forge.tools.UUID();forge.internal.addEventListener("request.progress."+g,m)}forge.internal.call("request.ajax",{url:k,username:j,password:d,data:A,headers:f,timeout:o,type:i,boundary:w,files:l,fileUploadMethod:v,progress:g},function(C){var E=C.response,G=C.headers;clearTimeout(p);if(q){return}q=true;if(window._forgeDebug){try{s.respTime=(new Date()).getTime()/1000;s.respText=E;_forgeDebug.wi.NetworkNotify.didReceiveResponse(s.id,s.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Success",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(s.id,s.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(s.id,s.respTime)}catch(F){}}try{if(t=="xml"){var D,B;if(window.DOMParser){D=new DOMParser();B=D.parseFromString(E,"text/xml")}else{B=new ActiveXObject("Microsoft.XMLDOM");B.async="false";B.loadXML(E)}E=B}else{if(t=="json"){E=JSON.parse(E)}}}catch(F){}n&&n(E,G)},function(){clearTimeout(p);if(q){return}q=true;if(window._forgeDebug){try{s.respTime=(new Date()).getTime()/1000;s.respText=A;_forgeDebug.wi.NetworkNotify.didReceiveResponse(s.id,s.reqTime,"XHR",{mimeType:"Unknown",textEncodingName:"",httpStatusCode:1,httpStatusText:"Failure",httpHeaderFields:{},connectionReused:false,connectionID:0,wasCached:false});_forgeDebug.wi.NetworkNotify.setInitialContent(s.id,s.respText,"XHR");_forgeDebug.wi.NetworkNotify.didFinishLoading(s.id,s.respTime)}catch(B){}}u&&u.apply(this,arguments)})}})();(function(){forge.file={getImage:function(b,c,a){if(typeof b==="function"){a=c;c=b;b={}}if(!b){b={}}forge.internal.call("file.getImage",b,c&&function(e){var d={uri:e,name:"Image",type:"image"};if(b.width){d.width=b.width}if(b.height){d.height=b.height}c(d)},a)},getVideo:function(b,c,a){if(typeof b==="function"){a=c;c=b;b={}}if(!b){b={}}forge.internal.call("file.getVideo",b,c&&function(e){var d={uri:e,name:"Video",type:"video"};c(d)},a)},getLocal:function(b,c,a){forge.internal.call("file.getLocal",{name:b},c,a)},info:function(b,c,a){forge.internal.call("file.info",b,c,a)},base64:function(b,c,a){forge.internal.call("file.base64",b,c,a)},string:function(b,c,a){forge.internal.call("file.string",b,c,a)},URL:function(c,d,e,b){if(typeof d==="function"){b=e;e=d}var a={};for(prop in c){a[prop]=c[prop]}a.height=d.height||c.height||undefined;a.width=d.width||c.width||undefined;forge.internal.call("file.URL",a,e,b)},isFile:function(b,c,a){if(!b||!("uri" in b)){c(false)}else{forge.internal.call("file.isFile",b,c,a)}},cacheURL:function(b,c,a){forge.internal.call("file.cacheURL",{url:b},c&&function(d){c({uri:d})},a)},saveURL:function(b,c,a){forge.internal.call("file.saveURL",{url:b},c&&function(d){c({uri:d})},a)},remove:function(b,c,a){forge.internal.call("file.remove",b,c,a)},clearCache:function(b,a){forge.internal.call("file.clearCache",{},b,a)}}})();